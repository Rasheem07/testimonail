(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[626],{7840:(e,t,s)=>{Promise.resolve().then(s.bind(s,1193))},5971:(e,t,s)=>{"use strict";s.d(t,{O:()=>a});var r=s(8357);let a=async e=>{let t;let s=(0,r.$)(),a=await fetch("http://localhost:5000/api/otp/sendmail",{method:"POST",headers:{"Content-Type":"application/json","xsrf-token":s._csrf},mode:"cors",body:JSON.stringify({user:e})}),o=await a.json();return a.ok||(t=o.error),{data:o,error:t}}},1193:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(7437),a=s(8357),o=s(6763),n=s(5971),l=s(6648),i=s(7138),d=s(6463),c=s(2265),p=s(517);function u(){let e=(0,d.useRouter)(),{toast:t}=(0,o.pm)(),[s,u]=(0,c.useState)({email:"",password:""}),[m,h]=(0,c.useState)(null),[x,f]=(0,c.useState)(""),[g,y]=(0,c.useState)(!1),S=(0,p.b)();(0,c.useEffect)(()=>{S&&e.push("/dashboard"),m&&m.error?t({variant:"destructive",description:m.error.toString()}):x&&t({variant:"default",description:x})},[m,t,x,S,e]);let b=e=>{let{name:t,value:r}=e.target;u({...s,[t]:r})},w=async()=>{let r=(0,a.$)();console.log(r);try{let a=await fetch("http://localhost:5000/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json","xsrf-token":r._csrf},credentials:"include",mode:"cors",body:JSON.stringify(s)}),o=a.headers.get("content-type");if(o&&o.includes("application/json")){let r=await a.json();if(console.log("Server Response:",r),!a.ok){h({type:r.type,error:r.error}),y(!1);return}y(!1),e.push("/login/otp?email=".concat(s.email));let o=await (0,n.O)(s.email.trim());o.error&&t({description:o.error,variant:"destructive"}),f(r.message),u({email:"",password:""}),h({type:"",error:""})}else{let e=await a.text();console.error("Unexpected server response:",e),h({type:"Unexpected Error",error:"Unexpected server response"}),y(!1)}}catch(e){console.error("Network or server error:",e),h({type:"NetworkError",error:e.message||"An error occurred"})}};return(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),w()},className:"space-y-6 transition",children:[(0,r.jsxs)("div",{className:"w-full flex gap-4 flex-1",children:[(0,r.jsx)(i.default,{href:"http://localhost:5000/api/auth/google",className:"py-3 px-6 gap-4 flex justify-center flex-1 bg-zinc-50 hover:bg-zinc-100 rounded-sm border border-gray-300 w-full divide-x divide-gray-800",children:(0,r.jsx)(l.default,{src:"/icons/google.png",alt:"",height:25,width:25,className:"object-contain"})}),(0,r.jsx)(i.default,{href:"http://localhost:5000/api/auth/github",className:"py-3 px-6 gap-4 flex flex-1 justify-center rounded-sm border border-gray-300 w-full divide-x divide-gray-800",children:(0,r.jsx)(l.default,{src:"/icons/github.png",alt:"",height:25,width:25,className:"object-contain"})})]}),(0,r.jsxs)("div",{className:"flex items-center w-full",children:[(0,r.jsx)("div",{className:"border-t border-zinc-500 border-dotted flex-grow mr-3"}),(0,r.jsx)("span",{className:"text-lg font-medium tracking-normal text-zinc-400",children:"OR sign in with your email"}),(0,r.jsx)("div",{className:"border-t border-zinc-500 border-dotted flex-grow ml-3"})]}),(0,r.jsxs)("div",{className:"w-full flex flex-col gap-1.5",children:[(0,r.jsxs)("label",{htmlFor:"email",className:"text-sm font-medium text-zinc-300",children:["Email ",(0,r.jsx)("span",{className:"text-red-800",children:"*"})]}),(0,r.jsx)("input",{onChange:b,value:s.email,name:"email",required:!0,type:"email",id:"email",className:"rounded-sm shadow-md border border-gray-300 text-gray-800 px-4 py-2 placeholder:text-zinc-500 outline-none",placeholder:"Enter your email:"})]}),(0,r.jsxs)("div",{className:"w-full flex flex-col gap-1.5",children:[(0,r.jsxs)("label",{htmlFor:"password",className:"text-sm font-medium text-zinc-300",children:["Password ",(0,r.jsx)("span",{className:"text-red-800",children:"*"})]}),(0,r.jsx)("input",{onChange:b,value:s.password,name:"password",required:!0,type:"password",id:"password",className:"rounded-sm shadow-md border border-gray-300 text-gray-800 px-4 py-2 placeholder:text-zinc-500 outline-none",placeholder:"Enter your password:"})]}),(0,r.jsx)("div",{className:"text-purple-600 text-base font-medium mt-2",children:"Forgot Password?"}),(0,r.jsx)("button",{type:"submit",className:"text-zinc-100 hover:bg-purple-700 rounded-md w-full bg-purple-600 py-3 px-6 text-center mt-2",children:"Sign In"}),(0,r.jsxs)("p",{className:"text-sm text-zinc-400 mx-auto text-center",children:["You can also"," ",(0,r.jsx)("span",{className:"underline underline-offset-1",children:"continue with SAML SSO"})]}),(0,r.jsxs)("p",{className:"text-sm text-zinc-400 mx-auto text-center",children:["Do not have an account?"," ",(0,r.jsx)(i.default,{href:"/signup",className:"font-medium text-purple-600",children:"Sign up"})]})]})}},8357:(e,t,s)=>{"use strict";function r(){return document.cookie.split(";").map(e=>e.split("=")).reduce((e,t)=>{let[s,r]=t;return{...e,[s.trim()]:decodeURIComponent(r)}},{})}s.d(t,{$:()=>r})},6763:(e,t,s)=>{"use strict";s.d(t,{Am:()=>p,pm:()=>u});var r=s(2265);let a=0,o=new Map,n=e=>{if(o.has(e))return;let t=setTimeout(()=>{o.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);o.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?n(s):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function c(e){d=l(d,e),i.forEach(e=>{e(d)})}function p(e){let{...t}=e,s=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),r=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:e=>{e||r()}}}),{id:s,dismiss:r,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}function u(){let[e,t]=r.useState(d);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:p,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},517:(e,t,s)=>{"use strict";s.d(t,{b:()=>r});let r=()=>"true"===localStorage.getItem("isLoggedIn")}},e=>{var t=t=>e(e.s=t);e.O(0,[625,291,130,215,744],()=>t(7840)),_N_E=e.O()}]);